<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <link rel="shortcut icon" href="./img/CHZlogo.jpg" type="image/x-icon"> <!--logo-->
    <title>注册页面</title>
    <link rel="stylesheet" href="./css/registered.css">
    <link rel="stylesheet" href="css/返回.css">
</head>

<body style="background-image: url('./img/LGbjt2_2.png');">
    <a class="returnbutton" href="index.html"><img src="img/返回按钮纯白.png" alt=""></a>
    <div class="content">
        <div class="login-wrapper">
            <div class="left-img">
                <div class="glass">
                    <div class="tips">
                        <div class="title">
                            中世纪霸主
                        </div>
                        <h1>领略中世纪地球霸主的风范</h1>
                        <span>恐龙对的地球的统治</span>
                        <span>欢迎来到中世纪的地球霸主</span>
                    </div>
                </div>
            </div>

            <div class="right-login-ferm">
                <div class="form-wrapper">
                    <h1>注册账号</h1>
                    <div class="input-items">
                        <input type="text" id="regUsername" class="inputs" placeholder="用户名">
                    </div>
                    <div class="input-items">
                        <input type="text" id="regEmail" class="inputs" placeholder="邮箱">
                    </div>
                    <div class="input-items">
                        <input type="password" id="regPassword" class="inputs" placeholder="密码">
                    </div>
                    <button class="btn" onclick="register()">注册</button>
                    <div class="siginup">
                        <span>
                            <a href="登录.html">返回登录  </a>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        function register() {
            const username = document.getElementById('regUsername').value;
            const email = document.getElementById('regEmail').value;
            const password = document.getElementById('regPassword').value;

            // 用户名长度限制，假设为 3 - 20 个字符
            if (username.length < 3 || username.length > 20) {
                alert('用户名长度应在 3 到 20 个字符之间');
                return;
            }

            // 密码长度限制，假设为 6 - 20 个字符
            if (password.length < 6 || password.length > 20) {
                alert('密码长度应在 6 到 20 个字符之间');
                return;
            }

            // 邮箱格式判断
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('请输入有效的邮箱地址');
                return;
            }

            if (username && email && password) {
                // 从本地存储获取已注册用户
                let users = JSON.parse(localStorage.getItem('users')) || [];
                // 检查用户名是否已存在
                const existingUser = users.find(user => user.username === username);
                if (existingUser) {
                    alert('用户名已存在，请选择其他用户名');
                } else {
                    // 添加新用户
                    users.push({ username, email, password });
                    // 保存到本地存储
                    localStorage.setItem('users', JSON.stringify(users));
                    alert('注册成功，请登录');
                    // 跳转到登录页面
                    window.location.href = '登录.html';
                }
            } else {
                alert('请填写所有必填字段');
            }
        }
    </script>
</body>

</html>
